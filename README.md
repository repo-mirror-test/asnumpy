# ğŸ“˜ AsNumpy--æ˜‡è…¾NPUåŸç”ŸNumpy
![AsNumpy Logo](docs/images/AsNumpy%20Logo.png)

åœ¨äººå·¥æ™ºèƒ½ä¸æ·±åº¦å­¦ä¹ é£é€Ÿå‘å±•çš„å½“ä¸‹ï¼Œé«˜æ•ˆã€å‹å¥½çš„è®¡ç®—å·¥å…·æˆä¸ºå¼€å‘è€…ä»¬çš„è¿«åˆ‡éœ€æ±‚ã€‚éšç€ç®—åŠ›éœ€æ±‚çš„ä¸æ–­æ”€å‡ï¼Œä¸“ç”¨è®¡ç®—èŠ¯ç‰‡åŠç›¸åº”çš„è½¯ä»¶ç”Ÿæ€æ„ˆå‘é‡è¦ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ**æˆªè‡³2025å¹´8æœˆ2æ—¥ï¼ŒPython ä»¥26.14% çš„å æ¯”æˆä¸º Tiobe å†å²ä¸Šæœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€**ï¼Œåœ¨ç§‘å­¦è®¡ç®—ã€æ•°æ®åˆ†æä¸äººå·¥æ™ºèƒ½é¢†åŸŸå‡å æ®ä¸»å¯¼åœ°ä½ã€‚è€Œåœ¨ Python ç”Ÿæ€ä¸­ï¼Œ**Numpy æ˜¯åŸºçŸ³æ€§çš„æ•°å­¦è¿ç®—åº“**ï¼Œä¸ºåç»­çš„è¯¸å¤šæ·±åº¦å­¦ä¹ æ¡†æ¶å’Œå·¥å…·æä¾›äº†åº•å±‚æ”¯æ’‘ã€‚

> â— ä¸ºè¿›ä¸€æ­¥æå‡å¼€å‘è€…åœ¨æ˜‡è…¾ NPU ä¸Šçš„è®¡ç®—ä½“éªŒï¼Œå“ˆå°”æ»¨å·¥ä¸šå¤§å­¦è®¡ç®—å­¦éƒ¨è‹ç»Ÿåæ•™æˆå›¢é˜Ÿè”åˆåä¸ºå›¢é˜Ÿæ‰“é€ äº† **æ˜‡è…¾ NPU åŸç”Ÿ Numpy â€”â€” AsNumpy**ã€‚

AsNumpy æ˜¯ä¸€æ¬¾ **æ·±åº¦æ”¯æŒæ˜‡è…¾ NPU å¹¶é«˜åº¦å…¼å®¹ Numpy æ¥å£çš„è½»é‡çº§ Python æ•°å­¦è¿ç®—åº“**ã€‚  
é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ **NPUArray æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼ŒAsNumpy åœ¨ Python å±‚å®Œå…¨å…¼å®¹ Numpy APIï¼ŒåŒæ—¶åœ¨ C++ åº•å±‚æ·±åº¦é›†æˆäº† **åä¸º Ascend C ç®—å­åº“**ï¼Œå¯¹ NPU ç®—å­ï¼ˆåŒ…æ‹¬æ•°å­¦è¿ç®—ã€çº¿æ€§ä»£æ•°ã€éšæœºé‡‡æ ·ç­‰ï¼‰è¿›è¡Œç³»ç»ŸåŒ–å°è£…ï¼Œå¹¶é«˜æ•ˆç®¡ç† `dtype`ã€`shape` ä»¥åŠ `aclTensor` ç­‰åº•å±‚èµ„æºï¼Œå®ç°äº†ä¸ä¸»æœºç«¯ `numpy.ndarray` çš„åŒå‘æ‹·è´ã€‚å€ŸåŠ© **pybind11** å®ç°é«˜æ•ˆçš„ Python-C++ æ¥å£ç»‘å®šï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåƒä½¿ç”¨ Numpy ä¸€æ ·åœ¨ NPU ä¸Šæ— ç¼åˆ›å»ºã€æ“ä½œå¼ é‡ã€‚  

---
## âœ¨æ ¸å¿ƒä¼˜åŠ¿

ä¸ Numpy æ¥å£é«˜åº¦å…¼å®¹ï¼Œå‡ ä¹æ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬ï¼Œå³å¯é‡Šæ”¾æ˜‡è…¾ NPU çš„é«˜æ•ˆåŸç”Ÿè®¡ç®—èƒ½åŠ›ã€‚

---
## ğŸ’¡è®¾è®¡ç†å¿µ

### æ•°æ®ç»“æ„ NPUArray

`NPUArray` æ˜¯ AsNumpy çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œè®¾è®¡ç†å¿µä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š

#### ğŸ”„ å…¼å®¹æ€§
åœ¨ Python å±‚å®Œå…¨å…¼å®¹ **Numpy API**ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ `ndarray` æ— ç¼è¡”æ¥çš„ä½“éªŒã€‚  
è¿™æ„å‘³ç€ä½ å¯ä»¥åƒä½¿ç”¨ **Numpy** ä¸€æ ·ä½¿ç”¨ `NPUArray`ã€‚

#### ğŸ“¦ å†…éƒ¨å°è£…
`NPUArray` å†…éƒ¨å°è£…äº† `dtype`ã€`shape` ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œä»¥åŠåº•å±‚çš„æ•°æ® `aclTensor`ã€‚  
ç”¨æˆ·åœ¨ Python å±‚æ“ä½œæ—¶ï¼Œæ— éœ€å…³å¿ƒåº•å±‚å¤æ‚çš„ç»†èŠ‚ã€‚

#### ğŸ—‚ï¸ èµ„æºç®¡ç†
`NPUArray` æä¾›äº†æ–¹ä¾¿çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”åœ¨å¯¹è±¡ä¸å†ä½¿ç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°é‡Šæ”¾èµ„æºã€‚  
è¿™ç§è®¾è®¡é¿å…äº†æ‰‹åŠ¨ç®¡ç†å†…å­˜å¯èƒ½å¼•å‘çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºç®—æ³•é€»è¾‘ã€‚

---

### **API æ¶æ„**

AsNumpy çš„ API æ¶æ„åˆ†ä¸º **åŠŸèƒ½æ¨¡å—** ä¸ **åŸºç¡€æ¨¡å—** ä¸¤å¤§ç±»ã€‚

API æ¶æ„è®¾è®¡ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![API æ¶æ„è®¾è®¡å›¾](docs/images/åŠŸèƒ½æ¨¡å—.png)

#### ğŸ“Š å…·ä½“åŠŸèƒ½
AsNumpy å·²å®ç°æ¶µç›– **[æ•°å­¦è¿ç®—](docs/math/)**ï¼ˆä¸‰è§’å‡½æ•°ã€æŒ‡æ•°ã€å¯¹æ•°ç­‰å¸¸è§æ•°å­¦è®¡ç®—ï¼‰ã€çº¿æ€§ä»£æ•°ï¼ˆçŸ©é˜µè¿ç®—ä¸åˆ†è§£ï¼‰ã€**[éšæœºæŠ½æ ·](docs/random/)**ã€**[é€»è¾‘å‡½æ•°](docs/logic/)**ã€**æ•°ç»„åˆ›å»º**ã€**è¾“å…¥è¾“å‡º**ç­‰å¤šä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä»¥åŠ **è¾…åŠ©å·¥å…·**ã€**å†…å­˜æ± ç®¡ç†**ã€**æ•°æ®ç±»å‹** ç­‰åŸºç¡€æ¨¡å—ï¼Œä¸ºå¼€å‘è€…æä¾›å…¨é¢çš„ç§‘å­¦è®¡ç®—æ”¯æŒã€‚

è¯¦ç»† API åˆ—è¡¨è¯·å‚é˜… [docs](docs/) ç›®å½•ä¸‹çš„å„æ¨¡å—æ–‡æ¡£ã€‚  

---

### ğŸš€ NPU æ‰©å±•åŠŸèƒ½æ¨¡å—

ç”±äº CANN å†…ç½®ç®—å­ä¸»è¦é¢å‘ AI ç¼–ç¨‹ä¸ç¥ç»ç½‘ç»œè®­ç»ƒç­‰æ·±åº¦å­¦ä¹ åœºæ™¯ï¼Œè€Œ AsNumpy ä½œä¸ºé€šç”¨ç§‘å­¦è®¡ç®—åº“ï¼Œæ›´ä¾§é‡äºæ•°æ®è®¡ç®—ã€å¤„ç†ä¸åˆ†æç­‰ä¼ ç»Ÿæ•°å€¼è®¡ç®—åœºæ™¯ï¼Œä¸¤è€…çš„åº”ç”¨é¢†åŸŸå­˜åœ¨å·®å¼‚ã€‚åœ¨å°† Numpy çš„å®Œæ•´ API ä½“ç³»è¿ç§»åˆ° NPU çš„è¿‡ç¨‹ä¸­ï¼ŒAsNumpy ä¼šé¢ä¸´ç®—å­è¦†ç›–åº¦ä¸è¶³çš„æŒ‘æˆ˜ã€‚ä¸ºæ­¤ï¼Œå¼•å…¥äº† **NPU æ‰©å±•åŠŸèƒ½æ¨¡å—**ï¼Œé€šè¿‡è‡ªç ”ç®—å­ä¸å¼€æºç®—å­åº“ç›¸ç»“åˆçš„æ–¹å¼ï¼Œæå‡ API è¦†ç›–ç‡ä¸è®¡ç®—æ€§èƒ½ã€‚

NPUæ‰©å±•åŠŸèƒ½æ¨¡å—è®¾è®¡ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![NPUæ‰©å±•åŠŸèƒ½æ¨¡å—è®¾è®¡å›¾](docs/images/NPUæ‰©å±•åŠŸèƒ½æ¨¡å—.png)

#### âš ï¸ ç°æœ‰é—®é¢˜
- AsNumpy éœ€è¦å°è£… CANN å†…ç½®ç®—å­ã€‚  
- CANN å†…ç½®ç®—å­æ— æ³•è¦†ç›– NumPy çš„å…¨éƒ¨ APIã€‚  

#### ğŸ’¡ è§£å†³æ–¹æ¡ˆ
- å¯¹ç¼ºå¤±çš„ç®—å­è¿›è¡Œæ‰‹åŠ¨å¼€å‘ã€‚  
- å€ŸåŠ© **OpenBOAT** å¼€æºç®—å­åº“æ¥è¡¥é½ç®—å­ã€‚  
- ä¼˜å…ˆå®‰æ’ç¼ºå¤±ç®—å­çš„å¼€å‘è®¡åˆ’ã€‚  

#### ğŸŒŸ ä»·å€¼ä½“ç°
- **OpenBOAT** ä¸º AsNumpy æä¾›ç®—å­æ”¯æŒã€‚  
- æ¨åŠ¨ AsNumpy å…¼å®¹æ›´å¤š NumPy APIã€‚  
- åŠ é€Ÿ AsNumpy é¡¹ç›®çš„è½åœ°ä¸å®Œå–„ã€‚  

> ğŸ“Œ **è¯´æ˜**ï¼š  
> OpenBOAT æ˜¯ç”± **å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦è®¡ç®—å­¦éƒ¨è‹ç»Ÿåæ•™æˆå›¢é˜Ÿ** è®¾è®¡çš„ Ascend C ç®—å­ä»“åº“ï¼Œèƒ½å¤Ÿä¸º AsNumpy æä¾›çµæ´»çš„ç®—å­æ‰©å±•æ”¯æŒã€‚

---
## ğŸ“ ä½¿ç”¨æ–¹å¼å¯¹æ¯”ï¼šNumpy vs AsNumpy
> ğŸ’» ä¸‹é¢å±•ç¤ºä¸€ç»„ä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©å¼€å‘è€…ç›´è§‚å¯¹æ¯” **Numpy** ä¸ **AsNumpy** çš„ä½¿ç”¨å·®å¼‚ã€‚

### ä½¿ç”¨ **Numpy** å®ç°çŸ©é˜µå…ƒç´ ä¹˜ç§¯ä¸æ±‚å’Œ
```python 
import numpy as np
rows = 20000  
cols = 20000 
m1 = np.random.normal(...)
m2 = np.random.normal(...)
elementwise_product = np.multiply(m1, m2)
total_sum = np.sum(elementwise_product) 
```

### ä½¿ç”¨ **AsNumpy** å®ç°çŸ©é˜µå…ƒç´ ä¹˜ç§¯ä¸æ±‚å’Œ
```python
import asnumpy as ap 
m1_npu = ap.ndarray.from_numpy(m1)
m2_npu = ap.ndarray.from_numpy(m2)
elementwise_product = ap.multiply(m1_npu, m2_npu)
total_sum = ap.sum(elementwise_product) 
```

---
## ğŸš€ å·²æ”¯æŒåŠŸèƒ½

| åŠŸèƒ½                                         | çŠ¶æ€     |
| -------------------------------------------- | -------- |
| AscendCL ç³»ç»Ÿé…ç½®ä¸è¿è¡Œæ—¶ç®¡ç†                 | âœ… å·²å®Œæˆ |
| NPUArray æ•°æ®ç»“æ„                            | âœ… å·²å®Œæˆ |
| åŸºç¡€åˆ›å»ºå‡½æ•°ï¼š`ones`ã€`zeros`                 | âœ… å·²å®Œæˆ |
| ä¸ Numpy åŒå‘æ‹·è´ï¼ˆ`to_numpy`ã€`from_numpy`ï¼‰ | âœ… å·²å®Œæˆ |
| å®Œæ•´ Numpy API å…¼å®¹                          | ğŸš§ è¿›è¡Œä¸­ |
| æ›´å¤šé€å…ƒç´  / è§„çº¦ç®—å­                        | ğŸš§ è¿›è¡Œä¸­ |


---

## ğŸ“Š æ€§èƒ½æµ‹è¯•

ä»¥ä¸åŒå½¢çŠ¶çš„å¼ é‡ä½œä¸ºè¾“å…¥ï¼Œé’ˆå¯¹ **AsNumpy ä¸ Numpy** è¿›è¡ŒèƒŒå¯¹èƒŒæµ‹è¯•ã€‚  
ç¤ºä¾‹ï¼š`multiply()` å‡½æ•°ï¼Œæ•°æ®ç±»å‹ä¸º `float32`ï¼Œæµ‹è¯•æ—¶é—´å•ä½ä¸ºç§’ï¼ˆå°æ•°ç‚¹åå››ä½ï¼‰ã€‚  

> å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¸€å®šè§„æ¨¡ä¸‹ï¼ŒNPU çš„åŸç”Ÿè®¡ç®—èƒ½åŠ›èƒ½å¾—åˆ°å……åˆ†é‡Šæ”¾ã€‚  

| å¼ é‡å½¢çŠ¶             | AsNumpy æ‰§è¡Œæ—¶é—´ (s) | Numpy æ‰§è¡Œæ—¶é—´ (s) | åŠ é€Ÿæ¯”   |
| -------------------- | -------------------- | ------------------ | ------- |
| (500, 500)       | 1.9355               | 0.1708             | 0.09Ã—   |
| (1000, 1000)      | 0.0692               | 0.7029             | 10.16Ã— |
| (2000, 2000)     | 0.1033               | 3.8387             | 37.17Ã— |
| (3000, 3000)    | 0.1115               | 14.3567             | 128.70Ã— |


---

## âš™ï¸ ä½¿ç”¨è¯´æ˜

æœ¬ä»“åº“ç›®å‰æ”¯æŒç”¨æˆ·ä»¥ **æºä»£ç ç¼–è¯‘å®‰è£…** çš„æ–¹å¼ä½¿ç”¨ï¼Œåç»­å°†ä»¥ `whl` åŒ…å½¢å¼æä¾›é¢„ç¼–è¯‘ç‰ˆæœ¬ã€‚  

**ç¯å¢ƒè¦æ±‚**:
- ç¡¬ä»¶å¹³å°ï¼š
    - CPUï¼šAArch64æˆ–X86_64
    - NPUï¼šæ˜‡è…¾910B
- ç³»ç»Ÿç‰ˆæœ¬ï¼š
    - ä¸»æµLinuxç³»ç»Ÿï¼ŒUbuntu 20.04åŠä»¥ä¸Šç‰ˆæœ¬
- è½¯ä»¶ç‰ˆæœ¬ï¼š
    - ç¼–è¯‘å·¥å…·ï¼š`GCC >= 11.2`ã€`CMake >= 3.22`ã€`ninja-build >= 1.12`
    - Pythonç¯å¢ƒï¼š`Python >= 3.9`ã€å…·æœ‰`pip`å·¥å…·
    - CANNï¼š`8.2.RC1.alpha003`åŠä»¥ä¸Šç‰ˆæœ¬

**ç”¨æˆ·ä½¿ç”¨æ–¹å¼**ï¼š
```bash
git clone --recursive https://gitcode.com/cann/asnumpy.git
cd asnumpy
pip install -r requirements.txt
python -m build
pip install dist/*.whl
```

---

## ğŸ§­ ä¸‹ä¸€æ­¥è®¡åˆ’ï¼ˆæ¬¢è¿è´¡çŒ®ï¼‰

| é˜¶æ®µ       | ç›®æ ‡                                                                 |
| ---------- | -------------------------------------------------------------------- |
| **v0.2**   | å†…éƒ¨ä»£ç  **é¢å‘å¯¹è±¡** é‡æ„ï¼Œç»“æ„æ›´æ¸…æ™°                                |
| **v0.3**   | æ”¯æŒé€å…ƒç´  & è§„çº¦ç®—å­ï¼š`sum`ã€`matmul` â€¦                              |
| **v1.0**   | **å…¼å®¹ Numpy ä½¿ç”¨ç‡å‰ 100 çš„ APIï¼Œæ”¯æŒå¤§éƒ¨åˆ† Numpy ç®—æ³•è¿ç§»è‡³ AsNumpy** |
| **v2.0**   | **æ‰©å±• Ascend C ç®—å­åº“ï¼Œæ”¯æŒä½¿ç”¨è‡ªå®šä¹‰ Ascend C ç®—å­**                |


---

## ğŸ‘¥ è´¡çŒ®è€…

- å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦è‹ç»Ÿåè€å¸ˆå›¢é˜Ÿ  
- ç‹ç”œç”œè€å¸ˆå›¢é˜Ÿ  
- åä¸º CANN å›¢é˜Ÿ  


---

## ğŸ“„ å¼€æºåè®®

Apache License, Version 2.0 Â© 2024-2025 AsNumpy è´¡çŒ®è€…
